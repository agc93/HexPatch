<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=Edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <link rel="apple-touch-icon" sizes="180x180" href="/HexPatch/assets/favicons/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/HexPatch/assets/favicons/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/HexPatch/assets/favicons/favicon-16x16.png">
        <link rel="manifest" href="/HexPatch/assets/favicons/site.webmanifest">
        <link rel="shortcut icon" type="image/png" href="/HexPatch/assets/favicons/favicon.ico"/>
        <link rel="mask-icon" href="/HexPatch/assets/favicons/safari-pinned-tab.svg" color="#e9ecef">
        <meta name="msapplication-config" content="/HexPatch/assets/favicons/browserconfig.xml" />
        <meta name="msapplication-TileColor" content="#e9ecef">
        <meta name="theme-color" content="#e9ecef">

        <link href="/HexPatch/assets/bootstrap/bootstrap.css" rel="stylesheet" />
                <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&family=Roboto+Slab:wght@400;700&family=Roboto:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&display=swap" rel="stylesheet" data-no-mirror>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.26.0/themes/prism.css">
        <link href="/HexPatch/assets/css/theme.css" rel="stylesheet" />
        <link href="/HexPatch/assets/css/styles.css" rel="stylesheet" />

        <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
        <script src="https://kit.fontawesome.com/a1cad7ed9a.js" crossorigin="anonymous" data-no-mirror></script>
        <script src="https://cdn.jsdelivr.net/npm/mermaid@8.4.8/dist/mermaid.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/svg-pan-zoom@3.6.1/dist/svg-pan-zoom.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/prismjs@1.26.0/components/prism-core.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/prismjs@1.26.0/plugins/autoloader/prism-autoloader.min.js" data-no-mirror></script>
        <script src="https://cdn.jsdelivr.net/npm/quicklink@2.0.0/dist/quicklink.umd.js"></script>

        

        

        <title>HexPatch Documentation - Concepts</title>
    </head>
    <body class="d-flex flex-column">
        <div class="flex-grow-1 d-flex flex-column">
            <div class="bg-nav">
                <div class="container-xl py-3">
                    <div class="row">
                        <div class="offset-lg-2 col-12 col-lg-8 px-0">
                            <nav class="navbar navbar-expand-md navbar-light align-items-start">
    <a class="navbar-brand" href="/HexPatch/">
                <span class="text-primary">HexPatch Documentation</span>
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapse-topnav" aria-controls="collapse-topnav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div id="collapse-topnav" class="collapse navbar-collapse flex-wrap">
        <ul class="navbar-nav mr-auto">
            
        </ul>
        <ul class="navbar-nav">
                    <li class="nav-item">
            <a class="nav-link" href="/HexPatch/concepts">Concepts</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="/HexPatch/intro-modengine">ModEngine Usage</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="/HexPatch/intro-standalone">Standalone Usage</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="/HexPatch/api">API</a>
        </li>

            
        </ul>
    </div>
</nav>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="flex-grow-1 d-flex flex-column">
                    <!-- Titlebar -->
                    <div id="titlebar" class="py-4">
                        <div class="container-xl">
                            <div class="row">
                                <div class="offset-lg-2 col-12 col-lg-8 px-3 px-lg-0 w-100 d-flex flex-wrap align-items-end">
                                    <div class="flex-grow-1">
                                        <div class="breadcrumbs d-flex flex-column flex-md-row text-break">

                                        </div>
                                        <div class="text-white m-0 text-break title">

Concepts
                                        </div>
                                    </div>
                                        <div class="navbar navbar-expand-md navbar-dark p-0">
                                            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#left-sidebar" aria-controls="left-sidebar" aria-expanded="false" aria-label="Toggle navigation">
                                                <span class="navbar-toggler-icon"></span>
                                            </button>
                                        </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Under title -->
                    <div id="undertitle">
                        <div class="container-xl">
                            <div class="row">
                                    <div class="col-md-3 col-lg-2">
                                    </div>
                                    <div class="col-md-9 col-lg-8 bg-white">
                                    </div>
                                <div class="col-lg-2 d-none d-lg-block">
                                </div>
                            </div>
                        </div>
                    </div>

                <!-- Body -->
                <div class="flex-grow-1 d-flex flex-column">
                        <div class="container-xl flex-grow-1 d-flex flex-column">
                            <div class="row flex-grow-1 align-items-stretch">
                                        <div id="content" class="offset-lg-2 col-12 col-lg-8 p-4 pt-md-0 bg-white">
<h1 id="basics-of-hexpatch">Basics of HexPatch</h1>
<h2 id="patch-structure">Patch Structure</h2>
<p>HexPatch uses ModEngine's patch structure which consists of the following rough design:</p>
<ul>
<li>One or more <code>PatchSet</code>s
<ul>
<li>which contain one or more <code>Patch</code>es
<ul>
<li>where each <code>Patch</code> has a <code>Template</code>, a <code>Value</code> and a <code>Type</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<p>For example, here's a basic patch set initialization example:</p>
<pre><code class="language-csharp">var set = new PatchSet&lt;Patch&gt; {
    Name = &quot;Pilot Count&quot;,
    Patches = new List&lt;Patch&gt; {
        new Patch {
            Description = &quot;Set Pilot count to 2&quot;,
            Template = &quot;01 00 00 00 1C 01&quot;,
            Value = &quot;02 00 00 00 1C 01&quot;,
            Type = &quot;inPlace&quot;
        }
    }
};
</code></pre>
<p>Now let's look at those in more detail.</p>
<p>The <code>PatchSet</code> is a purely logical organization idea: they're <em>mostly</em> just a way of organizing related patches together. The <code>PatchSet</code> object just has two things: a <code>Name</code> and a list of <code>Patch</code> objects. On it's own, a <code>PatchSet</code> doesn't do anything, that's up to the actual <code>Patch</code> objects in the set.</p>
<p>The <code>Patch</code> is the actual hex edit to make. In this case, we're telling HexPatch to find any instance of the bytes represented as <code>01 00 00 00 1C 01</code> in the file and <em>replace</em> them with <code>02 00 00 00 1C 01</code>. We'll come back to <code>Type</code> further on.</p>
<p>When HexPatch runs, we'll tell it where to find our files, give it this patch set and it will open the files, handle all the boring binary handling for us, and just run our patch over those files.</p>
<h3 id="patch-types">Patch Types</h3>
<p>The patch <code>Type</code> is what controls what HexPatch <em>does</em> when it finds a match to our <code>Template</code>. In the example above, we used <code>inPlace</code> which is the name of the <code>InPlaceReplacementType</code> built into HexPatch. The <code>inPlace</code> type (as the name suggests) replaces the bytes matched by <code>Template</code> with the bytes from <code>Value</code>.</p>
<blockquote>
<p>Put another way, we're telling HexPatch to <em>find</em> the bytes from <code>Template</code>, then <em>do</em> whatever the <code>Type</code> says with the <code>Value</code>.</p>
</blockquote>
<p>For another example, there's also a <code>BeforeReplacementType</code> which can be used to replace the bytes immediately <strong>before</strong> the <code>Template</code> with the value from <code>Value</code>. We could have written the patch from above this way instead:</p>
<pre><code class="language-csharp">// trimmed
new Patch {
    Description = &quot;Set Pilot count to 2&quot;,
    Template = &quot;00 00 00 1C 01&quot;,
    Value = &quot;02&quot;,
    Type = &quot;before&quot;
}
</code></pre>
<p>These two patches do the same thing! It's all about finding the patch type for what you need to do. You can also add your own patch types by implementing the <code>IReplacementType</code> interface!</p>

                                        </div>
                                <div class="col-lg-2 p-md-0 m-md-0 bg-body">
                                    <div id="right-sidebar" class="sidebar px-0 px-md-3 pt-3">
        <div class=" mb-3 sidebar-root">
            <div class="sidebar-nav-item sidebar-header">On This Page</div>
            <div class="sidebar-nav-children">
                    <div class="sidebar-nav-item"><a href="#basics-of-hexpatch">Basics of HexPatch</a></div>
                        <div class="sidebar-nav-children">
                                <div class="sidebar-nav-item"><a href="#patch-structure">Patch Structure</a></div>
                        </div>
            </div>
        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div id="footer" class="p-3 text-white">
            <div class="container-xl">
                <div class="row">
    <div class="offset-lg-2 col-12 col-lg-8">
        <div class="pt-2 font-size-sm text-muted text-center">
            Generated By <a class="text-muted" href="https://statiq.dev">Statiq</a>
        </div>
    </div>
</div>
            </div>
        </div>

        <!-- Scripts -->
        <script>
            $(document).ready(function() {
                quicklink.listen();

                // Bootstrap tooltips
                $('[data-toggle="tooltip"]').tooltip();

				// Keeps the sidebars in view on wider viewports
				let left = null;
				let leftParent = null;
				let right = null;
				let rightParent = null;
                function stickSidebars()
				{
				    if (left == null) {
                        left = $('#left-sidebar');
                        right = $('#right-sidebar');
                    }
                    if (left.length) {
                        if (window.innerWidth >= 768) {
                            if (leftParent == null) {
                                leftParent = left.parent()[0];
                            }
                            if (leftParent) {
                                let leftRect = leftParent.getBoundingClientRect();
                                stickSidebar(left,  leftRect);
                            }
                        } else {
                            left.css('position', 'relative');
                            if (left.css('bottom') != 0) {
                                left.css('bottom', '0');
                            }
                        }
                    }
                    if (right.length) {
                        if (window.innerWidth >= 768) {
                            if (rightParent == null) {
                                rightParent = right.parent()[0];
                            }
                            if (rightParent) {
                                let rightRect = rightParent.getBoundingClientRect();
                                stickSidebar(right,  rightRect);
                            }
                        } else {
                            right.css('position', 'relative');
                            if (right.css('bottom') != 0) {
                                right.css('bottom', '0');
                            }
                        }
                    }
				}
				function stickSidebar(sidebar, rect) {
                    // Bottom
                    if (rect.bottom > window.innerHeight) {
                        sidebar.css('bottom', rect.bottom - window.innerHeight + "px");
                    } else {
                        sidebar.css('bottom', 0);
                    }
                    // Top
                    if (rect.top < 0) {
                        sidebar.css('position', 'sticky');
                    } else {
                        sidebar.css('position', 'absolute');
                    }
				}
				$(window).on("load", function() {
				    stickSidebars();
				});
                $(window).scroll(function() {
				    stickSidebars();
				});
				$(window).resize(function() {
				    stickSidebars();
				})

                // Mermaid diagrams
                mermaid.initialize(
                {
                    flowchart:
                    {
                        useMaxWidth: false
                    },
					startOnLoad: false,
					cloneCssStyles: false
                });
                mermaid.init(undefined, ".mermaid");

                // Remove the max-width setting that Mermaid sets
                var mermaidSvg = $('.mermaid svg');
                mermaidSvg.addClass('img-fluid');
                mermaidSvg.css('max-width', '');

                // Make it scrollable
				var target = document.querySelector(".mermaid svg");
				if(target !== null)
				{
					var panZoom = window.panZoom = svgPanZoom(target, {
						zoomEnabled: true,
						controlIconsEnabled: true,
						fit: true,
						center: true,
                        maxZoom: 20,
                        zoomScaleSensitivity: 0.6
					});

                    // Do the reset once right away to fit the diagram
                    panZoom.resize();
                    panZoom.fit();
                    panZoom.center();

                    $(window).resize(function(){
                        panZoom.resize();
                        panZoom.fit();
                        panZoom.center();
                    });
				}
            });
        </script>

        

        
    </body>
</html>